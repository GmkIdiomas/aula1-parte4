<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Tradu√ß√£o de Frases - Presente Cont√≠nuo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fff;
      text-align: center;
      padding: 50px;
    }
    .card {
      background: #f4f4f4;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
      display: inline-block;
      min-width: 300px;
    }
    input {
      padding: 10px;
      width: 300px;
      font-size: 16px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin: 5px;
      cursor: pointer;
    }
    .correct { color: green; font-weight: bold; }
    .incorrect { color: red; font-weight: bold; }
    #fazerDepoisSecao {
      margin-top: 50px;
      text-align: left;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
  </style>
</head>
<body>
  <div class="card">
    <h2 id="portugues">Frase em portugu√™s</h2>
    <input type="text" id="resposta" placeholder="Digite em ingl√™s" />
    <br />
    <button onclick="verificarResposta()">Enviar</button>
    <button onclick="naoSei()">N√£o sei</button>
    <button id="ouvirBtn" onclick="ouvirFrase()" style="display: none;">üîä Ouvir frase</button>
    <button id="fazerDepoisBtn" onclick="marcarFazerDepois()" style="display: none;">Fazer depois</button>
    <br />
    <button onclick="voltarFrase()">‚Üê Voltar</button>
    <button onclick="reiniciar()">üîÅ Reiniciar atividade</button>
    <p id="mensagem"></p>
  </div>

  <div id="fazerDepoisSecao" style="display: none;">
    <h3>N√£o sei:</h3>
    <ul id="listaFazerDepois"></ul>
  </div>

  <script>
    const frases = [
      { pt: "Ele est√° esperando", en: "He is waiting" },
      { pt: "Ele estava esperando", en: "He was waiting" },
      { pt: "Eles est√£o consertando o carro", en: "They are fixing the car" },
      { pt: "Eles estavam consertando o carro", en: "They were fixing the car" },
      { pt: "Eles est√£o se abra√ßando", en: "They are hugging each other" },
      { pt: "Eles estavam se abra√ßando", en: "They were hugging each other" },
      { pt: "Ela est√° abrindo a porta", en: "She is opening the door" },
      { pt: "O cachorro estava atacando o gato", en: "The dog was attacking the cat" },
      { pt: "O cachorro n√£o est√° atacando o gato", en: "The dog is not attacking the cat" },
      { pt: "O cachorro n√£o estava atacando o gato", en: "The dog was not attacking the cat" },
      { pt: "Ele est√° ajudando o cara", en: "He is helping the guy" },
      { pt: "Ele estava ajudando o cara", en: "He was helping the guy" },
      { pt: "Ela est√° aceitando o dinheiro", en: "She is accepting the money" },
      { pt: "Eles est√£o acordando", en: "They are waking up" },
      { pt: "Eles estavam acordando", en: "They were waking up" }
    ];

    let indice = 0;
    let tentativas = 0;
    let acertou = false;
    const fazerDepois = [];
    const historico = [];

    function mostrarFrase() {
      document.getElementById("portugues").innerText = frases[indice].pt;
      document.getElementById("resposta").value = "";
      document.getElementById("mensagem").innerText = "";
      document.getElementById("ouvirBtn").style.display = "none";
      document.getElementById("fazerDepoisBtn").style.display = "none";
      acertou = false;
      tentativas = 0;
      document.getElementById("resposta").focus();
    }

    function avancarFrase() {
      historico.push(indice);
      indice++;
      if (indice < frases.length) {
        mostrarFrase();
      } else {
        document.querySelector(".card").innerHTML = `
          <h2>Atividade conclu√≠da!</h2>
          <p>Tire um print da tela e envie para o(a) seu(a) professor(a).</p>
          <button onclick="reiniciar()">üîÅ Reiniciar atividade</button>
        `;
      }
    }

    function voltarFrase() {
      if (historico.length > 0) {
        indice = historico.pop();
        mostrarFrase();
      }
    }

    function verificarResposta() {
      const resposta = document.getElementById("resposta").value.trim().toLowerCase();
      const correta = frases[indice].en.toLowerCase();

      if (resposta === correta) {
        if (!acertou) {
          document.getElementById("mensagem").innerHTML = "<span class='correct'>Correto!</span>";
          document.getElementById("ouvirBtn").style.display = "inline-block";
          document.getElementById("fazerDepoisBtn").style.display = "none";
          acertou = true;
          tentativas = 0;
        } else {
          avancarFrase();
        }
      } else {
        tentativas++;
        document.getElementById("mensagem").innerHTML =
          `<span class='incorrect'>Incorreto. Se estiver com d√∫vidas, chame seu(a) professor(a) ou clique em "N√£o sei".</span>`;
        document.getElementById("fazerDepoisBtn").style.display = "inline-block";
      }
    }

    function naoSei() {
      fazerDepois.push(frases[indice]);
      atualizarListaFazerDepois();
      avancarFrase();
    }

    function ouvirFrase() {
      const utterance = new SpeechSynthesisUtterance(frases[indice].en);
      utterance.lang = "en-US";
      speechSynthesis.speak(utterance);
    }

    function marcarFazerDepois() {
      fazerDepois.push(frases[indice]);
      atualizarListaFazerDepois();
      avancarFrase();
    }

    function atualizarListaFazerDepois() {
      const secao = document.getElementById("fazerDepoisSecao");
      const lista = document.getElementById("listaFazerDepois");
      lista.innerHTML = "";
      fazerDepois.forEach(item => {
        const li = document.createElement("li");
        li.textContent = item.pt;
        lista.appendChild(li);
      });
      if (fazerDepois.length > 0) {
        secao.style.display = "block";
      }
    }

    function reiniciar() {
      indice = 0;
      tentativas = 0;
      acertou = false;
      fazerDepois.length = 0;
      historico.length = 0;
      document.getElementById("listaFazerDepois").innerHTML = "";
      document.getElementById("fazerDepoisSecao").style.display = "none";
      document.querySelector("body").innerHTML = document.body.innerHTML; // limpa e recria
      location.reload(); // recarrega o script
    }

    document.getElementById("resposta").addEventListener("input", () => {
      const resposta = document.getElementById("resposta").value.trim().toLowerCase();
      const correta = frases[indice].en.toLowerCase();

      if (resposta === correta && !acertou) {
        document.getElementById("mensagem").innerHTML = "<span class='correct'>Correto!</span>";
        document.getElementById("ouvirBtn").style.display = "inline-block";
        document.getElementById("fazerDepoisBtn").style.display = "none";
        acertou = true;
        tentativas = 0;
      }
    });

    document.getElementById("resposta").addEventListener("keydown", function(event) {
      if (event.key === "Enter" && acertou) {
        avancarFrase();
      }
    });

    mostrarFrase();
  </script>
</body>
</html>
